---
- name: Tailscale Playbook
  hosts: kube_node
  become: true
  become_user: root
  serial: "{{ serial_hosts | default(1) }}"
  roles:
    - tailscale
  tags:
    - tailscale

- name: OS Playbook
  hosts: kube_node
  become: true
  become_user: root
  serial: "{{ serial_hosts | default(1) }}"
  roles:
    - os
  tags:
    - os

- name: Retrieve OP items
  hosts: localhost
  roles:
    - op
  tags:
    - op

- name: Provider Playbook
  hosts: node1
  become: true
  become_user: root
  serial: "{{ serial_hosts | default(1) }}"
  roles:
    - provider
  tags:
    - provider

- name: GPU Playbook
  hosts: kube_node
  become: true
  become_user: root
  serial: "{{ serial_hosts | default(1) }}"
  roles:
    - gpu
  tags:
    - gpu
